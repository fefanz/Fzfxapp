<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Confluence Score – FZFX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, sans-serif; }
    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #1b2a3a 0, #050810 55%, #020308 100%);
      color: #e8f5ff;
      display: flex; justify-content: center; align-items: center; padding: 24px;
    }
    .app {
      width: 100%; max-width: 900px; background: rgba(3,10,20,0.96);
      border-radius: 20px; padding: 24px; box-shadow: 0 24px 60px rgba(0,0,0,0.8);
      border: 1px solid rgba(120,220,255,0.15); backdrop-filter: blur(16px);
    }
    .header { text-align: center; margin-bottom: 20px; }
    .title { font-size: 24px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: #b2f5ff; }
    .subtitle { font-size: 13px; color: #7ea0c0; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap: 14px; margin-top: 18px; }
    .card {
      background: radial-gradient(circle at top left, #172438 0, #050914 60%);
      border-radius: 14px; padding: 14px; border: 1px solid rgba(120,220,255,0.18);
      display: flex; flex-direction: column; gap: 4px; position: relative; overflow: hidden;
    }
    .card.active::before {
      content: ""; position: absolute; inset: 0;
      background: linear-gradient(135deg, rgba(0,255,200,0.06), transparent);
      opacity: 1;
    }
    .card-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.1em; color: #8fb4d8; }
    .card-value { font-size: 24px; font-weight: 700; color: #7cf7c4; }
    .card-footer { display: flex; justify-content: space-between; margin-top: 4px; }
    .card-helper { font-size: 10px; color: #58708f; max-width: 60%; }
    .toggle-wrapper { display: inline-flex; align-items: center; gap: 6px; font-size: 10px; color: #7ea0c0; }
    .switch { position: relative; width: 40px; height: 20px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider {
      position: absolute; inset: 0; border-radius: 20px; cursor: pointer;
      background-color: #222b3a; border: 1px solid #32425a; transition: 0.2s;
    }
    .slider:before {
      content: ""; position: absolute; width: 14px; height: 14px; left: 2px; bottom: 2px;
      background: #b0c7ff; border-radius: 50%; transition: 0.2s; box-shadow: 0 0 10px #b0c7ff88;
    }
    .switch input:checked + .slider {
      background: linear-gradient(90deg, #11c5a5, #46ff88); border-color: #3ae6b0;
    }
    .switch input:checked + .slider:before {
      transform: translateX(18px); background: #021312; box-shadow: 0 0 12px #46ff8888;
    }
    .total-section { margin-top: 26px; padding-top: 18px; border-top: 1px solid rgba(120,220,255,0.2); text-align: center; }
    .total-label { font-size: 12px; letter-spacing: 0.16em; text-transform: uppercase; color: #7ea0c0; }
    .total-value { font-size: 40px; font-weight: 800; color: #b2ffe4; }
    .badge { padding: 4px 10px; border-radius: 999px; font-size: 11px; font-weight: 600; display: inline-block; margin-top: 6px; }
    .badge.low { background: #ff57571f; color: #ff8b8b; border: 1px solid #ff575766; }
    .badge.medium { background: #ffc14f1f; color: #ffd68b; border: 1px solid #ffc14f66; }
    .badge.high { background: #4cd1951f; color: #9dffd4; border: 1px solid #4cd19566; }
    .badge.aplus { background: linear-gradient(90deg,#40e0d022,#00ff9922); color: #e5fff7; border: 1px solid #00ff99aa; }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="title">Confluence Summary</div>
      <div class="subtitle">Checklist de confluência – FZFX Trade Validator</div>
    </div>

    <div class="grid" id="cards-container"></div>

    <div class="total-section">
      <div class="total-label">Total Overall Score</div>
      <div id="totalScore" class="total-value">0%</div>
      <div id="badge" class="badge low">Low Confluence</div>
      <div id="caption" class="total-caption">Marque as confluências presentes neste trade.</div>
    </div>
  </div>

<script>
const confluences = [
  { id: "weekly", label: "WEEKLY", weight: 10, helper: "Tendência semanal alinhada" },
  { id: "daily",  label: "DAILY",  weight: 10, helper: "Tendência diária alinhada" },
  { id: "h4",     label: "4H",     weight: 10, helper: "Tendência 4H alinhada" },

  { id: "aoi",    label: "AOI", weight: 20, helper: "Zona de interesse forte" },
  { id: "bos",    label: "BOS / SHIFT", weight: 15, helper: "Quebra de estrutura a favor" },
  { id: "fibo",   label: "FIBO 62%", weight: 10, helper: "Retracção prime zone" },
  { id: "medias", label: "MÉDIAS", weight: 10, helper: "EMAs alinhadas em tendência" },
  { id: "retest", label: "RETEST", weight: 10, helper: "Break & retest limpo" },
  { id: "tl",     label: "TL / BANDEIRA", weight: 8,  helper: "Linha de tendência / canal" },
  { id: "candle", label: "CANDLE", weight: 5,  helper: "Hammer / engolfo / rejeição" },
  { id: "poc",    label: "POC", weight: 5,  helper: "Point of Control na zona" },
  { id: "ob",     label: "ORDER BLOCK", weight: 5, helper: "OB limpo dentro da AOI" }
];

const container = document.getElementById("cards-container");
const totalScoreEl = document.getElementById("totalScore");
const badgeEl = document.getElementById("badge");
const captionEl = document.getElementById("caption");

function renderCards() {
  confluences.forEach(conf => {
    const card = document.createElement("div");
    card.className = "card";
    card.id = `card-${conf.id}`;

    card.innerHTML = `
      <div class="card-label">${conf.label}</div>
      <div class="card-value">${conf.weight}%</div>
      <div class="card-footer">
        <div class="card-helper">${conf.helper}</div>
        <label class="toggle-wrapper">
          <span>Off</span>
          <div class="switch">
            <input type="checkbox" id="${conf.id}" />
            <span class="slider"></span>
          </div>
        </label>
      </div>
    `;

    container.appendChild(card);

    const checkbox = card.querySelector("input");
    const toggleText = card.querySelector(".toggle-wrapper span");

    checkbox.addEventListener("change", () => {
      if (checkbox.checked) {
        card.classList.add("active");
        toggleText.textContent = "On";
      } else {
        card.classList.remove("active");
        toggleText.textContent = "Off";
      }
      updateTotal();
    });
  });
}

function updateTotal() {
  let total = 0;
  confluences.forEach(conf => {
    const cb = document.getElementById(conf.id);
    if (cb && cb.checked) total += conf.weight;
  });

  totalScoreEl.textContent = total + "%";

  let level, caption, badgeClass;
  if (total === 0) {
    level = "No Confluence";
    caption = "Nenhuma confluência marcada – fique fora.";
    badgeClass = "low";
  } else if (total <= 40) {
    level = "Low Confluence";
    caption = "Setup fraco.";
    badgeClass = "low";
  } else if (total <= 80) {
    level = "Medium Confluence";
    caption = "Setup ok.";
    badgeClass = "medium";
  } else if (total <= 100) {
    level = "High Confluence";
    caption = "Setup forte.";
    badgeClass = "high";
  } else {
    level = "A+ Setup";
    caption = "Trade raro e poderoso.";
    badgeClass = "aplus";
  }

  badgeEl.textContent = level;
  badgeEl.className = "badge " + badgeClass;
  captionEl.textContent = caption;
}

renderCards();
updateTotal();
</script>

</body>
</html>
